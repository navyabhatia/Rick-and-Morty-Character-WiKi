{"ast":null,"code":"import _asyncToGenerator from\"/Users/navyabhatia/Desktop/react-wiki 2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/navyabhatia/Desktop/react-wiki 2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/navyabhatia/Desktop/react-wiki 2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/navyabhatia/Desktop/react-wiki 2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/navyabhatia/Desktop/react-wiki 2/node_modules/@babel/runtime/regenerator/index.js\";import{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{TextField,Container,Button,Typography,Card,CardContent,Tooltip}from\"@mui/material\";import loginUser from\"../../API/LoginUser\";import MyToastContainer from\"../MyToastContainer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initialFormState={email:\"\",password:\"\"};var Login=function Login(){var navigate=useNavigate();var _useState=useState(initialFormState),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var handleChange=function handleChange(e){setUser(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return loginUser(user);case 3:data=_context.sent;if(!data.success){_context.next=9;break;}// if login success\nconsole.log(\"login successful\");localStorage.setItem(\"isLoggedIn\",true);navigate(\"/\",{replace:true});return _context.abrupt(\"return\");case 9:// if login failed\ntoast.error(\"\".concat(data.msg));case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(localStorage.getItem(\"isLoggedIn\")){// user already logged in\nnavigate(\"/\",{replace:true});}});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(MyToastContainer,{}),/*#__PURE__*/_jsx(Container,{sx:{marginTop:10},children:/*#__PURE__*/_jsx(Card,{sx:{maxWidth:500,marginX:\"auto\",boxShadow:4,bgcolor:\"#EEF2FF\"},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h3\",component:\"h1\",textAlign:\"center\",sx:{margin:5},children:\"Login\"}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",id:\"email\",name:\"email\",margin:\"normal\",value:user.email,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Password\",id:\"password\",name:\"password\",type:\"password\",margin:\"normal\",value:user.password,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",sx:{paddingX:5,paddingY:1,marginY:2},onClick:handleSubmit,children:\"Login\"}),/*#__PURE__*/_jsxs(Typography,{paragraph:true,gutterBottom:true,variant:\"subtitle2\",sx:{fontSize:\"1rem\"},children:[\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(Tooltip,{title:\"Log in\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",style:{textDecoration:\"none\"},children:\"Register\"})})]})]})})})]});};export default Login;","map":{"version":3,"sources":["/Users/navyabhatia/Desktop/react-wiki 2/src/Components/Auth/Login.jsx"],"names":["useState","useEffect","Link","useNavigate","toast","TextField","Container","Button","Typography","Card","CardContent","Tooltip","loginUser","MyToastContainer","initialFormState","email","password","Login","navigate","user","setUser","handleChange","e","prevState","target","name","value","handleSubmit","preventDefault","data","success","console","log","localStorage","setItem","replace","error","msg","getItem","marginTop","maxWidth","marginX","boxShadow","bgcolor","margin","paddingX","paddingY","marginY","fontSize","textDecoration"],"mappings":"qnBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,MAAO,uCAAP,CAEA,OACEC,SADF,CAEEC,SAFF,CAGEC,MAHF,CAIEC,UAJF,CAKEC,IALF,CAMEC,WANF,CAOEC,OAPF,KAQO,eARP,CASA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,qBAA7B,C,6IAEA,GAAMC,CAAAA,gBAAgB,CAAG,CACvBC,KAAK,CAAE,EADgB,CAEvBC,QAAQ,CAAE,EAFa,CAAzB,CAKA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClB,GAAMC,CAAAA,QAAQ,CAAGf,WAAW,EAA5B,CACA,cAAwBH,QAAQ,CAACc,gBAAD,CAAhC,wCAAOK,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BF,OAAO,CAAC,SAACG,SAAD,wCAAqBA,SAArB,wBAAiCD,CAAC,CAACE,MAAF,CAASC,IAA1C,CAAiDH,CAAC,CAACE,MAAF,CAASE,KAA1D,IAAD,CAAP,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,0FAAG,iBAAOL,CAAP,2HACnBA,CAAC,CAACM,cAAF,GADmB,sBAEAhB,CAAAA,SAAS,CAACO,IAAD,CAFT,QAEbU,IAFa,mBAGfA,IAAI,CAACC,OAHU,yBAIjB;AACAC,OAAO,CAACC,GAAR,CAAY,kBAAZ,EACAC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmC,IAAnC,EACAhB,QAAQ,CAAC,GAAD,CAAM,CAAEiB,OAAO,CAAE,IAAX,CAAN,CAAR,CAPiB,wCAUnB;AACA/B,KAAK,CAACgC,KAAN,WAAeP,IAAI,CAACQ,GAApB,GAXmB,uDAAH,kBAAZV,CAAAA,YAAY,4CAAlB,CAcA1B,SAAS,CAAC,UAAM,CACd,GAAIgC,YAAY,CAACK,OAAb,CAAqB,YAArB,CAAJ,CAAwC,CACtC;AACApB,QAAQ,CAAC,GAAD,CAAM,CAAEiB,OAAO,CAAE,IAAX,CAAN,CAAR,CACD,CACF,CALQ,CAAT,CAOA,mBACE,wCACE,KAAC,gBAAD,IADF,cAEE,KAAC,SAAD,EAAW,EAAE,CAAE,CAAEI,SAAS,CAAE,EAAb,CAAf,uBACE,KAAC,IAAD,EACE,EAAE,CAAE,CACFC,QAAQ,CAAE,GADR,CAEFC,OAAO,CAAE,MAFP,CAGFC,SAAS,CAAE,CAHT,CAIFC,OAAO,CAAE,SAJP,CADN,uBAOE,MAAC,WAAD,yBACE,KAAC,UAAD,EACE,OAAO,CAAC,IADV,CAEE,SAAS,CAAC,IAFZ,CAGE,SAAS,CAAC,QAHZ,CAIE,EAAE,CAAE,CAAEC,MAAM,CAAE,CAAV,CAJN,mBADF,cAQE,KAAC,SAAD,EACE,KAAK,CAAC,OADR,CAEE,EAAE,CAAC,OAFL,CAGE,IAAI,CAAC,OAHP,CAIE,MAAM,CAAC,QAJT,CAKE,KAAK,CAAEzB,IAAI,CAACJ,KALd,CAME,QAAQ,CAAEM,YANZ,CAOE,SAAS,KAPX,EARF,cAiBE,KAAC,SAAD,EACE,KAAK,CAAC,UADR,CAEE,EAAE,CAAC,UAFL,CAGE,IAAI,CAAC,UAHP,CAIE,IAAI,CAAC,UAJP,CAKE,MAAM,CAAC,QALT,CAME,KAAK,CAAEF,IAAI,CAACH,QANd,CAOE,QAAQ,CAAEK,YAPZ,CAQE,SAAS,KARX,EAjBF,cA2BE,KAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,IAAI,CAAC,OAFP,CAGE,EAAE,CAAE,CAAEwB,QAAQ,CAAE,CAAZ,CAAeC,QAAQ,CAAE,CAAzB,CAA4BC,OAAO,CAAE,CAArC,CAHN,CAIE,OAAO,CAAEpB,YAJX,mBA3BF,cAkCE,MAAC,UAAD,EACE,SAAS,KADX,CAEE,YAAY,KAFd,CAGE,OAAO,CAAC,WAHV,CAIE,EAAE,CAAE,CAAEqB,QAAQ,CAAE,MAAZ,CAJN,oCAKyB,GALzB,cAME,KAAC,OAAD,EAAS,KAAK,CAAC,QAAf,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,KAAK,CAAE,CAAEC,cAAc,CAAE,MAAlB,CAA5B,sBADF,EANF,GAlCF,GAPF,EADF,EAFF,GADF,CA8DD,CA3FD,CA6FA,cAAehC,CAAAA,KAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport {\n  TextField,\n  Container,\n  Button,\n  Typography,\n  Card,\n  CardContent,\n  Tooltip,\n} from \"@mui/material\";\nimport loginUser from \"../../API/LoginUser\";\nimport MyToastContainer from \"../MyToastContainer\";\n\nconst initialFormState = {\n  email: \"\",\n  password: \"\",\n};\n\nconst Login = () => {\n  const navigate = useNavigate();\n  const [user, setUser] = useState(initialFormState);\n\n  const handleChange = (e) => {\n    setUser((prevState) => ({ ...prevState, [e.target.name]: e.target.value }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const data = await loginUser(user); // call api\n    if (data.success) {\n      // if login success\n      console.log(\"login successful\");\n      localStorage.setItem(\"isLoggedIn\", true);\n      navigate(\"/\", { replace: true });\n      return;\n    }\n    // if login failed\n    toast.error(`${data.msg}`);\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem(\"isLoggedIn\")) {\n      // user already logged in\n      navigate(\"/\", { replace: true });\n    }\n  });\n\n  return (\n    <>\n      <MyToastContainer />\n      <Container sx={{ marginTop: 10 }}>\n        <Card\n          sx={{\n            maxWidth: 500,\n            marginX: \"auto\",\n            boxShadow: 4,\n            bgcolor: \"#EEF2FF\",\n          }}>\n          <CardContent>\n            <Typography\n              variant=\"h3\"\n              component=\"h1\"\n              textAlign=\"center\"\n              sx={{ margin: 5 }}>\n              Login\n            </Typography>\n            <TextField\n              label=\"Email\"\n              id=\"email\"\n              name=\"email\"\n              margin=\"normal\"\n              value={user.email}\n              onChange={handleChange}\n              fullWidth\n            />\n            <TextField\n              label=\"Password\"\n              id=\"password\"\n              name=\"password\"\n              type=\"password\"\n              margin=\"normal\"\n              value={user.password}\n              onChange={handleChange}\n              fullWidth\n            />\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              sx={{ paddingX: 5, paddingY: 1, marginY: 2 }}\n              onClick={handleSubmit}>\n              Login\n            </Button>\n            <Typography\n              paragraph\n              gutterBottom\n              variant=\"subtitle2\"\n              sx={{ fontSize: \"1rem\" }}>\n              Don't have an account?{\" \"}\n              <Tooltip title=\"Log in\">\n                <Link to=\"/register\" style={{ textDecoration: \"none\" }}>\n                  Register\n                </Link>\n              </Tooltip>\n            </Typography>\n          </CardContent>\n        </Card>\n      </Container>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}